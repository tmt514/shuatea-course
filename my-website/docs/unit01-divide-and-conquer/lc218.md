---
sidebar_position: 103
sidebar_label: "ğŸŸ§ Leetcode 218. The Skyline Problem"
---

# Leetcode 218. The Skyline Problem


[ğŸ”— é¡Œç›®é€£çµ](https://leetcode.com/problems/the-skyline-problem/)

:::note é¡Œç›®æ•˜è¿°
åœ¨é€™å€‹å•é¡Œä¸­ï¼Œæˆ‘å€‘æƒ³è¦å¾çµ¦å®šçš„å»ºç¯‰ä½ç½®ï¼Œè¨ˆç®—å‡ºæŸåº§åŸå¸‚çš„å¤©éš›ç·šçš„å½¢ç‹€ã€‚
æ¯ä¸€æ£Ÿå»ºç¯‰å¯ä»¥è¢«è¦–ç‚ºåº§æ¨™å¹³é¢ä¸Šç·Šè²¼è‘— X è»¸çš„çŸ©å½¢ï¼Œç•¶æˆ‘å€‘ç”¨ $[\mathit{left}, \mathit{right}, \mathit{height}]$ è¡¨ç¤ºçš„æ™‚å€™ï¼Œä»£è¡¨è©²çŸ©å½¢çš„å·¦ç•Œ(Xåº§æ¨™)æ˜¯ $\mathit{left}$ã€å³ç•Œ(Xåº§æ¨™)æ˜¯ $\mathit{right}$ï¼Œä¸¦ä¸”é«˜åº¦(Yåº§æ¨™)æ˜¯ $\mathit{height}$ã€‚

ä¸€æ¢çš„å¤©éš›ç·šï¼Œä¾¿æ˜¯å°‡æ‰€æœ‰å»ºç¯‰æ”¾åœ¨åº§æ¨™å¹³é¢ä¸Šä»¥å¾Œï¼Œæ²¿è‘—æ‰€æœ‰å»ºç¯‰çš„ä¸Šç·£å½¢æˆçš„ä¸€æ¢æŠ˜ç·šã€‚
:::

## è§£é¡Œæ€è€ƒ

é€™é‚Šæˆ‘å€‘æä¾›ä¸€å€‹èˆ‡åˆä½µæ’åºæ³•ç›¸ç•¶æ¥è¿‘çš„è§£é¡Œæ€è·¯ï¼šå¦‚æœæˆ‘å€‘æ‰‹ä¸Šæœ‰å…©æ¢å¤©éš›ç·šï¼Œè¦æŠŠå®ƒå€‘åˆä½µèµ·ä¾†ï¼Œå…¶å¯¦å°±è·Ÿåˆä½µæ’åºæ³•å·®ä¸å¤šå°å§ï¼å‡è¨­æˆ‘å€‘çŸ¥é“å¦‚ä½•åˆä½µå…©æ¢å¤©éš›ç·šäº†ï¼Œé‚£éº¼ä¾¿å¯ä»¥ä¾ç…§åˆä½µæ’åºçš„æ¡†æ¶ï¼Œä½¿ç”¨åˆ†è€Œæ²»ä¹‹æ³•çš„æ–¹å¼å°‡é€™äº›å¤©éš›ç·šåˆä½µèµ·ä¾†ã€‚

å› æ­¤å‰©ä¸‹çš„å•é¡Œå°±æ˜¯è¦å¦‚ä½•è™•ç†ã€Œåˆä½µã€é€™å€‹æ­¥é©Ÿäº†ã€‚

## åƒè€ƒç¨‹å¼ç¢¼(C++)

é¦–å…ˆæ˜¯æ¡†æ¶çš„éƒ¨åˆ†ï¼š

```cpp
typedef vector<vector<int>> Skyline;

class Solution {
 public:
  vector<Skyline> convertToSkylines(vector<vector<int>>& buildings) {
    vector<Skyline> skylines;
    for (auto& b : buildings) {
      skylines.push_back({{b[0], b[2]}, {b[1], 0}});
    }
    return skylines;
  }

  // é€™ä¸€éƒ¨åˆ†æ˜¯åˆä½µçš„éç¨‹ï¼Œå¯¦éš›åˆä½µå…©æ¢å¤©éš›ç·šã€‚
  Skyline merge(Skyline& l, Skyline& r);

  Skyline mergeSkylines(vector<Skyline>& skylines) {
    if (skylines.size() == 1) return skylines[0];
    int m = skylines.size() / 2;
    vector<Skyline> left(skylines.begin(), skylines.begin() + m);
    vector<Skyline> right(skylines.begin() + m, skylines.end());
    auto l = mergeSkylines(left);
    auto r = mergeSkylines(right);
    return merge(l, r);
  }

  vector<vector<int>> getSkyline(vector<vector<int>>& buildings) {
    vector<Skyline> skylines = convertToSkylines(buildings);
    Skyline skyline = mergeSkylines(skylines);
    return skyline;
  }
};
```

æ¥ä¸‹ä¾†æ˜¯å¯¦éš›åˆä½µå…©æ¢å¤©éš›ç·šçš„å¯¦ä½œï¼š

```cpp
Skyline Solution::merge(Skyline& l, Skyline& r) {
  Skyline result;
  int i = 0, j = 0;
  int prevLeftHeight = 0, prevRightHeight = 0;
  auto add = [&](int x, int y) {
    if (result.empty() || result.back()[1] != y) {
      result.push_back({x, y});
    }
  };
  while (i < l.size() && j < r.size()) {
    if (l[i][0] == r[j][0]) {
      add(l[i][0], max(l[i][1], r[j][1]));
      prevLeftHeight = l[i++][1];
      prevRightHeight = r[j++][1];
    } else if (l[i][0] < r[j][0]) {
      add(l[i][0], max(l[i][1], prevRightHeight));
      prevLeftHeight = l[i++][1];
    } else {
      add(r[j][0], max(prevLeftHeight, r[j][1]));
      prevRightHeight = r[j++][1];
    }
  }
  while (i < l.size()) {
    add(l[i][0], l[i][1]);
    i++;
  }
  while (j < r.size()) {
    add(r[j][0], r[j][1]);
    j++;
  }
  return result;
}
```