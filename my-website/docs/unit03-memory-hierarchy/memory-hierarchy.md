---
sidebar_position: 1
sidebar_label: "🟦 記憶體架構 Memory Hierarchy"
---

# 多層次記憶體架構思維

:::tip 核心概念
考量資料存取的位置與頻率，而設計出更有效率的演算法。
:::

我們在設計演算法的時候，往往都會忽略實際的計算機結構中，除了「隨機存取記憶體(RAM)」以外，還有距離 CPU 更近的「快取記憶體(Cache)」或是暫存器(Register) 等儲存空間。尤其是快取記憶體，雖然空間不大，但是存取的速度比起記憶體而言，快了一個級別。

你可能會覺得說，啊，**編譯器**都幫我們進行最佳化了，**作業系統**應該可以幫助程式有效率地安排快取記憶體的存取順序吧？的確，在某些情形下編譯器和作業系統可以幫助我們分析這個程式存取資料的模式，比方說預判哪段程式碼會被執行（branch predictor）、預判哪些資料會被使用（prefetching）等等。但是，如果演算法當中存取資料的順序與方式被寫死了，編譯出來的程式實際執行起來也沒辦法提升效率。有了記憶體架構的觀念，我們更能夠設計出容易給編譯器和作業系統最佳化的演算法。

## 經典範例

* 3.1 二維陣列的存取順序
* 3.2 矩陣相乘
* 3.3 外部排序

## 實戰練習

★☆☆ Leetcode 146. LRU Cache [原題連結](https://leetcode.com/problems/lru-cache/)  
★★☆ Leetcode 347. Top K Frequent Elements [原題連結](https://leetcode.com/problems/top-k-frequent-elements/)

## 進階習題

* 串流演算法
  - 尋找出現頻率超過一定比例的數值
* 無視快取演算法
  - 無視快取排序
  